<form class="row" [formGroup]="form">
  <mat-form-field class="col-3">
    <mat-label>Buscar por</mat-label>
    <mat-select
      formControlName="field"
      (selectionChange)="onFieldChange($event.value)"
    >
      <mat-option *ngFor="let field of fields" [value]="field">
        {{ field.text }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <section class="col-4">
    <ng-template [cdkPortalOutlet]="selectedPortal"></ng-template>

    <ng-template #boolPortalField>
      <section>
        <mat-checkbox formControlName="value">
          {{ (selected$ | async)?.text }}
        </mat-checkbox>
      </section>
    </ng-template>
    <ng-template #numberPortalField>
      <mat-form-field>
        <mat-label> {{ (selected$ | async)?.text }} </mat-label>
        <input matInput type="number" formControlName="value" />
      </mat-form-field>
    </ng-template>
    <ng-template #textPortalField>
      <mat-form-field>
        <mat-label> {{ (selected$ | async)?.text }} </mat-label>
        <input matInput formControlName="value" />
      </mat-form-field>
    </ng-template>
    <ng-template #datePortalField>
      <mat-form-field>
        <mat-label> {{ (selected$ | async)?.text }} </mat-label>
        <input matInput formControlName="value" [matDatepicker]="picker" />
        <mat-datepicker-toggle
          matIconSuffix
          [for]="picker"
        ></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
    </ng-template>
  </section>
</form>
